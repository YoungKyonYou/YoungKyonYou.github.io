I"<p><br /><br /></p>

<h1 id="kubernetes와-mysql-workbench-연동하기"><center>Kubernetes와 Mysql Workbench 연동하기</center></h1>

<p><br /></p>

<p>여기서는 교육용 및 소규모 환경에서 사용하기 좋은 베이그런트(Vagrant)를 사용하고 베이그런트와 호환성이 좋은 버추얼박스(VirtualBox)를 사용해서 진행한다.</p>

<p><img src="/images/Kubernetes/kubernetes-Mysql/2021-07-27-23-54-14.png" alt="" /></p>

<p><br /></p>

<style lang="scss">
 p{
    text-align:center;
 }
</style>

<p><img src="/images/Kubernetes/kubernetes-Mysql/2021-07-27-23-54-32.png" alt="" /></p>

<p><br /></p>

<p>Vagrantfile 설정은 밑에 링크 달아놓은 이전 게시물을 참고<br /></p>

<p><strong><a href="https://youngkyonyou.github.io/kubernetes/2021/07/20/Kubernetes-3.1.3.html">Vagranfile 설정</a></strong></p>

<p><br /></p>

<p>위 링크에 들어가면 나오는 Vagrantfile과 스크립트들을 한 디렉토리에 넣고 <strong>vagrant up</strong>를 하게 되면 아래 사진과 같이 virtual box에 4개의 가상 머신이 생기는 것을 확인할 수 있다.</p>

<p><br /></p>

<p><img src="../images/Kubernetes/kubernetes-Mysql/2021-07-28-09-56-23.png" alt="" /></p>

<p><br /></p>

<p>이제 <strong>Superputty</strong>로 m-k8s를 접속한다.</p>

<p><br /></p>

<p><img src="/images/Kubernetes/kubernetes-Mysql/2021-07-28-09-57-40.png" alt="" /></p>

<p><br /></p>

<p>그리고 우리는 쿠버네티스 공식 문서에서 mysql를 배포하는 방법에 대해서 따라한다.</p>

<p><br /></p>

<p><strong><a href="https://kubernetes.io/ko/docs/tasks/run-application/run-single-instance-stateful-application/">쿠버네티스 공식 문서</a></strong></p>

<p><br /></p>

<p>이 사이트에서는 쿠버네티스 클러스터에서 퍼시스턴트볼륨(PersistentVolume)과 디폴로이먼트(Deployment)를 사용하여, 단일 이스턴스 스테이트풀 애플리케이션을 실행하는 방법을 보인다. 해당 애플리케이션은 MYSQL이다.</p>

<p><br /></p>

<p>이전에 PV(PersistentVolume)과 PVC(PersistentVolumeClaim)에 대해서 좀 알아보자.</p>

<p>파드에서 생성한 내용을 기록하고 보관하거나 모든 파드가 동일한 설정 값을 유지하고 관리하기 위해 공유된 볼륨으로부터 공통된 설정을 가지고 올 수 있도록 설계해야하는데 이때 원격으로 지원하는 것이 PVC이다. 쿠버네티스는 필요할 때 <strong>PVC</strong>를 요청해 사용한다. <strong>PVC</strong>를 사용하려면 PV로 볼륨을 선언해야 한다. 간단하게 <span style="color:red; font-weight:bold">PV</span>는 볼륨을 사용할 수 있게 준비하는 단계이고 <span style="color:red; font-weight:bold">PVC</span>는 준비된 볼륨에서 일정 공간을 할당받는 것이다. 비유하면 <span style="color:red; font-weight:bold">PV</span> 손(사용자)가 원하는 만큼의 피자를 접시에 담아 가져오는 것이다.</p>
:ET