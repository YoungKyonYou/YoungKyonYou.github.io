I"’¤<p><br /><br /></p>

<p><strong><em>í•´ë‹¹ ë‚´ìš©ì€ ì±… &lt;ì»¨í…Œì´ë„ˆ ì¸í”„ë¼ í™˜ê²½ êµ¬ì¶•ì„ ìœ„í•œ ì¿ ë²„ë„¤í‹°ìŠ¤/ë„ì»¤&gt;ì— ë‚˜ì˜¤ëŠ” ë‚´ìš©ì´ë©° ì´ëŠ” ê°œì¸ì ìœ¼ë¡œ ê³µë¶€í•˜ê¸° ìœ„í•´ì„œ ê²Œì‹œí•˜ëŠ” ê¸€ì„ì„ ì•Œë¦½ë‹ˆë‹¤.</em></strong></p>

<p><br /><br />
<em><strong>ì»¤í”¼ ì¤‘ë…ìë˜ëŠ” ì¤‘â€¦</strong></em>
<br />
(Press the Button)</p>

<p><br /><br /></p>

<style>
.containercoffee {
  width: 300px;
  height: 280px;
  position: relative;
  top: calc(50% - 140px);
  left: calc(50% - 150px);
}
.coffee-header {
  width: 100%;
  height: 80px;
  position: absolute;
  top: 0;
  left: 0;
  background-color: #ddcfcc;
  border-radius: 10px;
}
.coffee-header__buttons {
  width: 25px;
  height: 25px;
  position: absolute;
  top: 25px;
  background-color: #282323;
  border-radius: 50%;
}
.coffee-header__buttons::after {
  content: "";
  width: 8px;
  height: 8px;
  position: absolute;
  bottom: -8px;
  left: calc(50% - 4px);
  background-color: #615e5e;
}
.coffee-header__button-one {
  left: 15px;
}
.coffee-header__button-two {
  left: 50px;
}
.coffee-header__display {
  width: 50px;
  height: 50px;
  position: absolute;
  top: calc(50% - 25px);
  left: calc(50% - 25px);
  border-radius: 50%;
  background-color: #9acfc5;
  border: 5px solid #43beae;
  box-sizing: border-box;
}
.coffee-header__details {
  width: 8px;
  height: 20px;
  position: absolute;
  top: 10px;
  right: 10px;
  background-color: #9b9091;
  box-shadow: -12px 0 0 #9b9091, -24px 0 0 #9b9091;
}
.coffee-medium {
  width: 90%;
  height: 160px;
  position: absolute;
  top: 80px;
  left: calc(50% - 45%);
  background-color: #bcb0af;
}
.coffee-medium:before {
  content: "";
  width: 90%;
  height: 100px;
  background-color: #776f6e;
  position: absolute;
  bottom: 0;
  left: calc(50% - 45%);
  border-radius: 20px 20px 0 0;
}
.coffe-medium__exit {
  width: 60px;
  height: 20px;
  position: absolute;
  top: 0;
  left: calc(50% - 30px);
  background-color: #231f20;
}
.coffe-medium__exit::before {
  content: "";
  width: 50px;
  height: 20px;
  border-radius: 0 0 50% 50%;
  position: absolute;
  bottom: -20px;
  left: calc(50% - 25px);
  background-color: #231f20;
}
.coffe-medium__exit::after {
  content: "";
  width: 10px;
  height: 10px;
  position: absolute;
  bottom: -30px;
  left: calc(50% - 5px);
  background-color: #231f20;
}
.coffee-medium__arm {
  width: 70px;
  height: 20px;
  position: absolute;
  top: 15px;
  right: 25px;
  background-color: #231f20;
}
.coffee-medium__arm::before {
  content: "";
  width: 15px;
  height: 5px;
  position: absolute;
  top: 7px;
  left: -15px;
  background-color: #9e9495;
}
.coffee-medium__cup {
  width: 80px;
  height: 47px;
  position: absolute;
  bottom: 0;
  left: calc(50% - 40px);
  background-color: #FFF;
  border-radius: 0 0 70px 70px / 0 0 110px 110px;
}
.coffee-medium__cup::after {
  content: "";
  width: 20px;
  height: 20px;
  position: absolute;
  top: 6px;
  right: -13px;
  border: 5px solid #FFF;
  border-radius: 50%;
}
@keyframes liquid {
  0% {
    height: 0px;  
    opacity: 1;
  }
  5% {
    height: 0px;  
    opacity: 1;
  }
  20% {
    height: 62px;  
    opacity: 1;
  }
  95% {
    height: 62px;
    opacity: 1;
  }
  100% {
    height: 62px;
    opacity: 0;
  }
}
.coffee-medium__liquid {
  width: 6px;
  height: 63px;
  opacity: 0;
  position: absolute;
  top: 50px;
  left: calc(50% - 3px);
  background-color: #74372b;
  animation: liquid 4s 4s linear infinite;
}
.coffee-medium__smoke {
  width: 8px;
  height: 20px;
  position: absolute;  
  border-radius: 5px;
  background-color: #b3aeae;
}
@keyframes smokeOne {
  0% {
    bottom: 20px;
    opacity: 0;
  }
  40% {
    bottom: 50px;
    opacity: .5;
  }
  80% {
    bottom: 80px;
    opacity: .3;
  }
  100% {
    bottom: 80px;
    opacity: 0;
  }
}
@keyframes smokeTwo {
  0% {
    bottom: 40px;
    opacity: 0;
  }
  40% {
    bottom: 70px;
    opacity: .5;
  }
  80% {
    bottom: 80px;
    opacity: .3;
  }
  100% {
    bottom: 80px;
    opacity: 0;
  }
}
.coffee-medium__smoke-one {
  opacity: 0;
  bottom: 50px;
  left: 102px;
  animation: smokeOne 3s 4s linear infinite;
}
.coffee-medium__smoke-two {
  opacity: 0;
  bottom: 70px;
  left: 118px;
  animation: smokeTwo 3s 5s linear infinite;
}
.coffee-medium__smoke-three {
  opacity: 0;
  bottom: 65px;
  right: 118px;
  animation: smokeTwo 3s 6s linear infinite;
}
.coffee-medium__smoke-for {
  opacity: 0;
  bottom: 50px;
  right: 102px;
  animation: smokeOne 3s 5s linear infinite;
}
.coffee-footer {
  width: 95%;
  height: 15px;
  position: absolute;
  bottom: 25px;
  left: calc(50% - 47.5%);
  background-color: #41bdad;
  border-radius: 10px;
}
.coffee-footer::after {
  content: "";
  width: 106%;
  height: 26px;
  position: absolute;
  bottom: -25px;
  left: -8px;
  background-color: #000;
}
</style>

<div class="containercoffee">
    <div class="coffee-header">
      <div class="coffee-header__buttons coffee-header__button-one"></div>
      <div class="coffee-header__buttons coffee-header__button-two"></div>
      <div class="coffee-header__display"></div>
      <div class="coffee-header__details"></div>
    </div>
    <div class="coffee-medium">
      <div class="coffe-medium__exit"></div>
      <div class="coffee-medium__arm"></div>
      <div class="coffee-medium__liquid"></div>
      <div class="coffee-medium__smoke coffee-medium__smoke-one"></div>
      <div class="coffee-medium__smoke coffee-medium__smoke-two"></div>
      <div class="coffee-medium__smoke coffee-medium__smoke-three"></div>
      <div class="coffee-medium__smoke coffee-medium__smoke-for"></div>
      <div class="coffee-medium__cup"></div>
    </div>
    <div class="coffee-footer"></div>
</div>

<p><br /><br /><br /><br /><br /><br /><br /><br /></p>

<h1 id="í”„ë¡œë©”í…Œìš°ìŠ¤ë¡œ-ëª¨ë‹ˆí„°ë§-ë°ì´í„°-ìˆ˜ì§‘ê³¼-í†µí•©í•˜ê¸°"><center>í”„ë¡œë©”í…Œìš°ìŠ¤ë¡œ ëª¨ë‹ˆí„°ë§ ë°ì´í„° ìˆ˜ì§‘ê³¼ í†µí•©í•˜ê¸°</center></h1>

<p><br /></p>

<p>í”„ë¡œë©”í…Œìš°ìŠ¤ëŠ” ì  í‚¨ìŠ¤ì²˜ëŸ¼ í—¬ë¦„ìœ¼ë¡œ ì‰½ê²Œ ì„¤ì¹˜í•  ìˆ˜ ìˆë‹¤. ë‹¤ë§Œ ì  í‚¨ìŠ¤ ì„¤ì¹˜ ë•Œì™€ ë§ˆì°¬ê°€ì§€ë¡œ <span style="color:orange; font-weight:bold">NFS ë””ë ‰í„°ë¦¬(/nfs_shared/prometheus)</span>ë¥¼ ë§Œë“¤ê³ , ë§Œë“  NFS ë””ë ‰í„°ë¦¬ë¥¼ ì¿ ë²„ë„¤í‹°ìŠ¤ í™˜ê²½ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ <span style="color:orange; font-weight:bold">PV</span>ì™€ <span style="color:orange; font-weight:bold">PVC</span>ë¡œ êµ¬ì„±í•´ì•¼ í•œë‹¤. ì ‘ê·¼ ID(ì‚¬ìš©ì ID, ê·¸ë£¹ ID)ëŠ” 1000ë²ˆìœ¼ë¡œ ì„¤ì •í•œë‹¤.</p>

<p><br /></p>

<link rel="stylesheet" href="https: //www.webnots.com/resources/font-awesome/css/font-awesome.min.css" />

<link rel="stylesheet" href="/assets/css/webnots.css" />

<div class="webnots-success webnots-notification-box">í”„ë¡œë©”í…Œìš°ìŠ¤ë¥¼ ì„¤ì¹˜í•˜ëŠ” ë° í•„ìš”í•œ ì‚¬ì „ ì¤€ë¹„ë¥¼ ìœ„í•´ MetalLBë¥¼ ì„¤ì¹˜í•˜ê³  í—¬ë¦„ìœ¼ë¡œ ë°°í¬ë¥¼ ê°„í¸í™” ì‹œì¼œì•¼ í•œë‹¤.</div>

<p><br /></p>

<p><span style="color: rgba(131, 24, 67);">MetalLB</span> ê´€ë ¨ ì‹¤ìŠµ ë‚´ìš©ì€ ì•„ë˜ ë§í¬ë¥¼ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<p><strong><a href="https://youngkyonyou.github.io/kubernetes/2021/08/01/Kubernetes-MetalLB-3.3.4.html">MetalLB</a></strong></p>

<p><br /></p>

<p>ì¼ë‹¨ ì±…ì˜ Chapter 5.2.2ë¥¼ í¼ì³ì„œ ì‚¬ì „ ì‘ì—…ì„ ì§„í–‰í•´ ë³¸ë‹¤.</p>

<p><br /></p>

<hr />

<p><span style="color:maroon; font-weight:bold; font-size:30px;">ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆë¡œ MetalLB í•œ ë²ˆì— ë§Œë“¤ê¸°</span></p>

<p><br /></p>

<link href="http://fonts.googleapis.com/earlyaccess/hanna.css" rel="stylesheet" />

<div style="background: #eee;
  box-shadow: 0 8px 8px -4px lightblue; font-family: 'Hanna', sans-serif;; padding: 40px;">

ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆëŠ” ì•¼ë¯ˆ íŒŒì¼ì— ì •ì˜ëœ ê°’ì„ ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ê°’ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ì˜¤ë¸Œì íŠ¸ì— ëŒ€í•œ ìˆ˜ì • ì‚¬í•­ì„ ë°˜ì˜í•˜ë ¤ë©´ ì‚¬ìš©ìê°€ ì§ì ‘ ì•¼ë¯ˆ íŒŒì¼ì„ í¸ì§‘ê¸° í”„ë¡œê·¸ë¨ìœ¼ë¡œ ìˆ˜ì •í•´ì•¼ í•œë‹¤. ë§Œì•½ ìˆ˜ì •í•´ì•¼ í•˜ëŠ” ì•¼ë¯ˆ íŒŒì¼ì´ ë§¤ìš° ë§ê±°ë‚˜ í•˜ë‚˜ì˜ ì•¼ë¯ˆ íŒŒì¼ë¡œ í™˜ê²½ì´ ë‹¤ë¥¸ ì—¬ëŸ¬ ê°œì˜ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ë°°í¬í•´ì•¼ í•´ì„œ <bold>LABEL</bold>ì´ë‚˜ <bold>NAME</bold> ê°™ì€ ì¼ë¶€ í•­ëª©ì„ ìˆ˜ì •í•´ì•¼ í•œë‹¤ë©´ ë§¤ë²ˆ ì¼ì¼ì´ ê³ ì¹˜ëŠ” ë° ë§ì€ ë…¸ë ¥ì´ ë“ ë‹¤. ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆëŠ” ì´ë¥¼ ìœ„í•´ kustomize ëª…ë ¹ì„ ì œê³µí•œë‹¤. kustomize ëª…ë ¹ê³¼ creat ì˜µì…˜ìœ¼ë¡œ kustomization.yamlì´ë¼ëŠ” ê¸°ë³¸ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ê³  ì´ íŒŒì¼ì— ë³€ê²½í•´ì•¼ í•˜ëŠ” ê°’ë“¤ì„ ì ìš©í•œë‹¤. ê·¸ë¦¬ê³  build ì˜µì…˜ìœ¼ë¡œ ë³€ê²½í•  ë‚´ìš©ì´ ì ìš©ëœ ìµœì¢… ì•¼ë¯ˆ íŒŒì¼ì„ ì €ì¥í•˜ê±°ë‚˜ ë³€ê²½ëœ ë‚´ìš©ì´ ë°”ë¡œ ì‹¤í–‰ë˜ë„ë¡ ì§€ì •í•œë‹¤. </div>

<p><br /></p>

<p>ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆ ëª…ë ¹ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ <strong>~/_Book_k8sInfra.ch5/5.2.2/kustomize-install.sh</strong>ë¥¼ ì‹¤í–‰í•´ ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆ ì••ì¶• íŒŒì¼ì„ ë‚´ë ¤ë°›ëŠ”ë‹¤.</p>

<p><br /></p>

<p><strong>kustomize-install.sh</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>
curl <span class="nt">-L</span> <span class="se">\</span>
https://github.com/kubernetes-sigs/kustomize/releases/download/kustomize%2Fv3.6.1/kustomize_v3.6.1_linux_amd64.tar.gz <span class="nt">-o</span> /tmp/kustomize.tar.gz
<span class="nb">tar</span> <span class="nt">-xzf</span> /tmp/kustomize.tar.gz <span class="nt">-C</span>  /usr/local/bin
<span class="nb">echo</span> <span class="s2">"kustomize install successfully"</span>

</code></pre></div></div>

<p><br /></p>

<p>í•œ ì¤„ í•œ ì¤„ ì˜ë¯¸ë¥¼ ì•Œì•„ ë³´ì.</p>

<p><br /></p>

<p><strong>kustomize-install.sh</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>
<span class="c">#curlì€ ì‚¬ìš©ì ìƒí˜¸ ì‘ìš© ì—†ì´ ì‘ë™í•˜ë„ë¡ ì„¤ê³„ëœ ì„œë²„ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•œ ëª…ë ¹ì¤„ ìœ í‹¸ë¦¬í‹°ì´ë‹¤.</span>
<span class="c">#curlì„ ì‚¬ìš©í•˜ë©´ HTTP, HTTPS, SCP, SFTP ë° FTP ë“± ì§€ì›ë˜ëŠ” í”„ë¡œí† ì½œ ì¤‘ í•˜ë‚˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ê±°ë‚˜ ì—…ë¡œë“œí•  ìˆ˜ ìˆë‹¤.</span>
<span class="c">#curlì˜ -L ì˜µì…˜ì€ ì„œë²„ì—ì„œ HTTP 301ì´ë‚˜ HTTP 302 ì‘ë‹µì´ ì™”ì„ ê²½ìš° redirection URLë¡œ ë”°ë¼ê°„ë‹¤ëŠ” ê²ƒì´ë‹¤.</span>
<span class="c">#301ì€ 301, Permanently Moved </span>
<span class="c">#Permanentlyë¼ëŠ” ëœ»ì´ ì˜êµ¬íˆ, ì˜êµ¬ì ì¸ ì´ë¼ëŠ” ëœ»ì´ë¯€ë¡œ, ì˜êµ¬ì ìœ¼ë¡œ ì´ë™í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ìš”ì²­ëœ ë¦¬ì†ŒìŠ¤ê°€ ì˜êµ¬ì ìœ¼ë¡œ ì´ë™ í˜ì´ì§€ë¡œ ì´ë™ë˜ì—ˆë‹¤ëŠ” ê²ƒì´ë‹¤.</span>
<span class="c">#302, Temporarily Moved</span>
<span class="c">#Temporarilyë¼ëŠ” ëœ»ì´ ì„ì‹œì , ì„ì‹œì ì¸ ì´ë¼ëŠ” ëœ»ì´ë¯€ë¡œ, ì„ì‹œì ìœ¼ë¡œ ì´ë™í–ˆë‹¤ëŠ” ê²ƒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ìš”ì²­ëœ ë¦¬ì†ŒìŠ¤ê°€ ì„ì‹œì ìœ¼ë¡œ ì´ë™ í˜ì´ì§€ë¡œ ì´ë™ë˜ì—ˆë‹¤ëŠ” ê²ƒì´ë‹¤.</span>
<span class="c"># '\' í‘œì‹œëŠ” ì¤„ë°”ê¿ˆí•˜ëŠ” ê²ƒì´ë‹¤.</span>
curl <span class="nt">-L</span> <span class="se">\</span>

<span class="c">#-o ì˜µì…˜ì€ í•´ë‹¹ ë§í¬ì—ì„œ ë‹¤ìš´ë¡œë“œ ë°›ì€ ê²°ê³¼ë¥¼ ì§€ì •í•œ /tmp ì•„ë˜ kustomize.tar.gzë¼ëŠ” ì´ë¦„ì˜ íŒŒì¼ë¡œ ì €ì¥í•œë‹¤.</span>
<span class="c">#ìœˆë„ìš°ì—ì„œ ê¸°ë³¸ì ì´ê³  ë§ì´ ì‚¬ìš©í•˜ëŠ” ì••ì¶• í˜•ì‹ì´ zipì´ë¼ë©´ </span>
<span class="c">#ë¦¬ëˆ…ìŠ¤ì—ì„œëŠ” tar.gzë¥¼ ë§ì´ ì‚¬ìš©í•œë‹¤. ë¦¬ëˆ…ìŠ¤ì—ì„œ tar.gzëŠ” ë³„ë„ì˜</span>
<span class="c">#ì„¤ì¹˜ ì—†ì´ ê¸°ë³¸ì ìœ¼ë¡œ ì§€ì›í•˜ëŠ” ì••ì¶• í˜•ì‹ì´ë‹¤.</span>
https://github.com/kubernetes-sigs/kustomize/releases/download/kustomize%2Fv3.6.1/kustomize_v3.6.1_linux_amd64.tar.gz <span class="nt">-o</span> /tmp/kustomize.tar.gz

<span class="c">#tar -xzfëŠ” ì••ì¶•ì„ í•´ì œí•˜ëŠ” ëª…ë ¹ì´ë‹¤.</span>
<span class="c">#tar ì˜µì…˜ -x: ë¬¶ìŒì„ í•´ì œ</span>
<span class="c">#-z: gunzipì„ ì‚¬ìš©</span>
<span class="c">#-f: íŒŒì¼ ì´ë¦„ì„ ì§€ì •</span>
<span class="c">#ì¦‰ /tmp ì•„ë˜ kustomize.tar.gz íŒŒì¼ì˜ ì••ì¶•ì„ í•´ì œí•œë‹¤.</span>
<span class="c">#-C ì˜µì…˜ì€ ì••ì¶•ì„ í•´ì œí•œ ë‹¤ìŒì— /usr/local/bin ë””ë ‰í„°ë¦¬ì— ë„£ìœ¼ë¼ëŠ” ê²ƒì´ë‹¤.</span>
<span class="c">#ì´ë¥¼ í†µí•´ ë°°ì‹œ ì‰˜ì—ì„œ ë°”ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ ë§Œë“ ë‹¤.</span>
<span class="nb">tar</span> <span class="nt">-xzf</span> /tmp/kustomize.tar.gz <span class="nt">-C</span>  /usr/local/bin
<span class="nb">echo</span> <span class="s2">"kustomize install successfully"</span>

</code></pre></div></div>

<p><br /></p>

<p>ìœ„ì˜ ëª…ë ¹ì„ ì‹¤í–‰í•œë‹¤. ê·¸ ë‹¤ìŒ ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆì—ì„œ ë¦¬ì†ŒìŠ¤ ë° ì£¼ì†Œ í• ë‹¹ ì˜ì—­(Pool)ì„ êµ¬ì„±í•  ë•Œ ì‚¬ìš©í•  íŒŒì¼ë“¤ì„ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ <strong>~/_Book_k8sInfra/ch5/5.2.2</strong> ë””ë ‰í„°ë¦¬ë¡œ ì´ë™í•˜ê³  <strong>metallb-l2config.yaml, metallb.yaml, namespace.yaml</strong>ì´ ìˆëŠ” ê²ƒì„ í™•ì¸í•˜ê³  ê°ê°ì„ ì‚´í´ë³´ì.</p>

<p><br /></p>

<p><strong>metallb-l2config.yaml</strong></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">metallb-system</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">config</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="na">config</span><span class="pi">:</span> <span class="pi">|</span>
    <span class="s">address-pools:</span>
    <span class="s">- name: nginx-ip-range</span>
      <span class="s">protocol: layer2</span>
      <span class="s">addresses:</span>
      <span class="s">- 192.168.1.11-192.168.1.13</span>
</code></pre></div></div>

<p><br /></p>

<p><strong>metallb-l2config.yaml</strong></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#apiVersion: API ë²„ì „ì„ ëª…ì‹œí•œë‹¤</span>
<span class="c1">#ì´ ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ê³  ìˆëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ API ë²„ì „ì´ ì–´ë–¤ ê²ƒì¸ì§€</span>
<span class="c1">#ëª…ì‹œí•œë‹¤.</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>

<span class="c1">#ì–´ë–¤ ì¢…ë¥˜ì˜ ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒì„±í•˜ê³ ì í•˜ëŠ”ì§€ ëª…ì‹œí•œë‹¤.</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ConfigMap</span>

<span class="c1">#ì´ë¦„ ë¬¸ìì—´, UID, ê·¸ë¦¬ê³  ì„ íƒì ì¸ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ í¬í•¨í•˜ì—¬</span>
<span class="c1">#ì˜¤ë¸Œì íŠ¸ë¥¼ ìœ ì¼í•˜ê²Œ êµ¬ë¶„ì§€ì–´ ì¤„ ë°ì´í„°ì´ë‹¤.</span>
<span class="c1">#ì„œë¹„ìŠ¤ ì´ë¦„(name)ì€ configì´ë‹¤.</span>
<span class="na">metadata</span><span class="pi">:</span>

  <span class="c1">#ConfigMapì´ ìœ„ì¹˜í•˜ëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼</span>
  <span class="c1">#metallb-systemë¡œ í•œë‹¤.</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">metallb-system</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">config</span>


<span class="na">data</span><span class="pi">:</span>
  <span class="na">config</span><span class="pi">:</span> <span class="pi">|</span>

   <span class="s">#metallbì˜ ì„¸ë¶€ ì„¤ì •</span>
   <span class="s">#address-poolsì˜ ì´ë¦„ì„ nginx-ip-rangeë¡œ ì„¤ì •í•œë‹¤. </span>
    <span class="s">address-pools:</span>
    <span class="s">- name: nginx-ip-range</span>

      <span class="s">#metallbì—ì„œ ì œê³µí•˜ëŠ” ë¡œë“œë°¸ëŸ°ì„œì˜ ë™ì‘ ë°©ì‹ì´ë‹¤. ì¦‰ L2 ë°©ì‹ì´ë‹¤.</span>
      <span class="s">protocol: layer2</span>

      <span class="s">#metallbì—ì„œ ì œê³µí•˜ëŠ” ë¡œë“œë°¸ëŸ¬ì„œì˜ External ì£¼ì†Œì´ë‹¤.</span>
      <span class="s">#ì´ ë²”ìœ„ ì•ˆì—ì„œ External ì£¼ì†Œë¥¼ ë¶€ì—¬í•œë‹¤.</span>
      <span class="s">addresses:</span>
      <span class="s">- 192.168.1.11-192.168.1.13</span>
</code></pre></div></div>

<p><br /></p>

<p>metallb.yaml ì„¤ëª…ì€ ìƒëµí•œë‹¤.</p>

<p><br /></p>

<p><strong>metallb.yaml</strong></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">policy/v1beta1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">PodSecurityPolicy</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">metallb</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">speaker</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">metallb-system</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">allowPrivilegeEscalation</span><span class="pi">:</span> <span class="no">false</span>
  <span class="na">allowedCapabilities</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">NET_ADMIN</span>
  <span class="pi">-</span> <span class="s">NET_RAW</span>
  <span class="pi">-</span> <span class="s">SYS_ADMIN</span>
  <span class="na">fsGroup</span><span class="pi">:</span>
    <span class="na">rule</span><span class="pi">:</span> <span class="s">RunAsAny</span>
  <span class="na">hostNetwork</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">hostPorts</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">max</span><span class="pi">:</span> <span class="m">7472</span>
    <span class="na">min</span><span class="pi">:</span> <span class="m">7472</span>
  <span class="na">privileged</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">runAsUser</span><span class="pi">:</span>
    <span class="na">rule</span><span class="pi">:</span> <span class="s">RunAsAny</span>
  <span class="na">seLinux</span><span class="pi">:</span>
    <span class="na">rule</span><span class="pi">:</span> <span class="s">RunAsAny</span>
  <span class="na">supplementalGroups</span><span class="pi">:</span>
    <span class="na">rule</span><span class="pi">:</span> <span class="s">RunAsAny</span>
  <span class="na">volumes</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s1">'</span><span class="s">*'</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ServiceAccount</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">metallb</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">controller</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">metallb-system</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ServiceAccount</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">metallb</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">speaker</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">metallb-system</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRole</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">metallb</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">metallb-system:controller</span>
<span class="na">rules</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s1">'</span><span class="s">'</span>
  <span class="na">resources</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">services</span>
  <span class="na">verbs</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">get</span>
  <span class="pi">-</span> <span class="s">list</span>
  <span class="pi">-</span> <span class="s">watch</span>
  <span class="pi">-</span> <span class="s">update</span>
<span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s1">'</span><span class="s">'</span>
  <span class="na">resources</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">services/status</span>
  <span class="na">verbs</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">update</span>
<span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s1">'</span><span class="s">'</span>
  <span class="na">resources</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">events</span>
  <span class="na">verbs</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">create</span>
  <span class="pi">-</span> <span class="s">patch</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRole</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">metallb</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">metallb-system:speaker</span>
<span class="na">rules</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s1">'</span><span class="s">'</span>
  <span class="na">resources</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">services</span>
  <span class="pi">-</span> <span class="s">endpoints</span>
  <span class="pi">-</span> <span class="s">nodes</span>
  <span class="na">verbs</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">get</span>
  <span class="pi">-</span> <span class="s">list</span>
  <span class="pi">-</span> <span class="s">watch</span>
<span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s1">'</span><span class="s">'</span>
  <span class="na">resources</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">events</span>
  <span class="na">verbs</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">create</span>
  <span class="pi">-</span> <span class="s">patch</span>
<span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">extensions</span>
  <span class="na">resourceNames</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">speaker</span>
  <span class="na">resources</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">podsecuritypolicies</span>
  <span class="na">verbs</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">use</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Role</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">metallb</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">config-watcher</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">metallb-system</span>
<span class="na">rules</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s1">'</span><span class="s">'</span>
  <span class="na">resources</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">configmaps</span>
  <span class="na">verbs</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">get</span>
  <span class="pi">-</span> <span class="s">list</span>
  <span class="pi">-</span> <span class="s">watch</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRoleBinding</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">metallb</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">metallb-system:controller</span>
<span class="na">roleRef</span><span class="pi">:</span>
  <span class="na">apiGroup</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRole</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">metallb-system:controller</span>
<span class="na">subjects</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">kind</span><span class="pi">:</span> <span class="s">ServiceAccount</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">controller</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">metallb-system</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRoleBinding</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">metallb</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">metallb-system:speaker</span>
<span class="na">roleRef</span><span class="pi">:</span>
  <span class="na">apiGroup</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRole</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">metallb-system:speaker</span>
<span class="na">subjects</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">kind</span><span class="pi">:</span> <span class="s">ServiceAccount</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">speaker</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">metallb-system</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">RoleBinding</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">metallb</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">config-watcher</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">metallb-system</span>
<span class="na">roleRef</span><span class="pi">:</span>
  <span class="na">apiGroup</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s">Role</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">config-watcher</span>
<span class="na">subjects</span><span class="pi">:</span>
<span class="pi">-</span> <span class="na">kind</span><span class="pi">:</span> <span class="s">ServiceAccount</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">controller</span>
<span class="pi">-</span> <span class="na">kind</span><span class="pi">:</span> <span class="s">ServiceAccount</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">speaker</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">DaemonSet</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">metallb</span>
    <span class="na">component</span><span class="pi">:</span> <span class="s">speaker</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">speaker</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">metallb-system</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">metallb</span>
      <span class="na">component</span><span class="pi">:</span> <span class="s">speaker</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">annotations</span><span class="pi">:</span>
        <span class="s">prometheus.io/port</span><span class="pi">:</span> <span class="s1">'</span><span class="s">7472'</span>
        <span class="s">prometheus.io/scrape</span><span class="pi">:</span> <span class="s1">'</span><span class="s">true'</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">metallb</span>
        <span class="na">component</span><span class="pi">:</span> <span class="s">speaker</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">args</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">--port=7472</span>
        <span class="pi">-</span> <span class="s">--config=config</span>
        <span class="na">env</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">METALLB_NODE_NAME</span>
          <span class="na">valueFrom</span><span class="pi">:</span>
            <span class="na">fieldRef</span><span class="pi">:</span>
              <span class="na">fieldPath</span><span class="pi">:</span> <span class="s">spec.nodeName</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">METALLB_HOST</span>
          <span class="na">valueFrom</span><span class="pi">:</span>
            <span class="na">fieldRef</span><span class="pi">:</span>
              <span class="na">fieldPath</span><span class="pi">:</span> <span class="s">status.hostIP</span>
        <span class="na">image</span><span class="pi">:</span> <span class="s">metallb/speaker:v0.8.2</span>
        <span class="na">imagePullPolicy</span><span class="pi">:</span> <span class="s">IfNotPresent</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">speaker</span>
        <span class="na">ports</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">7472</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">monitoring</span>
        <span class="na">resources</span><span class="pi">:</span>
          <span class="na">limits</span><span class="pi">:</span>
            <span class="na">cpu</span><span class="pi">:</span> <span class="s">100m</span>
            <span class="na">memory</span><span class="pi">:</span> <span class="s">100Mi</span>
        <span class="na">securityContext</span><span class="pi">:</span>
          <span class="na">allowPrivilegeEscalation</span><span class="pi">:</span> <span class="no">false</span>
          <span class="na">capabilities</span><span class="pi">:</span>
            <span class="na">add</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">NET_ADMIN</span>
            <span class="pi">-</span> <span class="s">NET_RAW</span>
            <span class="pi">-</span> <span class="s">SYS_ADMIN</span>
            <span class="na">drop</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">ALL</span>
          <span class="na">readOnlyRootFilesystem</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">hostNetwork</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">nodeSelector</span><span class="pi">:</span>
        <span class="s">beta.kubernetes.io/os</span><span class="pi">:</span> <span class="s">linux</span>
      <span class="na">serviceAccountName</span><span class="pi">:</span> <span class="s">speaker</span>
      <span class="na">terminationGracePeriodSeconds</span><span class="pi">:</span> <span class="m">0</span>
      <span class="na">tolerations</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">effect</span><span class="pi">:</span> <span class="s">NoSchedule</span>
        <span class="na">key</span><span class="pi">:</span> <span class="s">node-role.kubernetes.io/master</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">metallb</span>
    <span class="na">component</span><span class="pi">:</span> <span class="s">controller</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">controller</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">metallb-system</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">revisionHistoryLimit</span><span class="pi">:</span> <span class="m">3</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">metallb</span>
      <span class="na">component</span><span class="pi">:</span> <span class="s">controller</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">annotations</span><span class="pi">:</span>
        <span class="s">prometheus.io/port</span><span class="pi">:</span> <span class="s1">'</span><span class="s">7472'</span>
        <span class="s">prometheus.io/scrape</span><span class="pi">:</span> <span class="s1">'</span><span class="s">true'</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">metallb</span>
        <span class="na">component</span><span class="pi">:</span> <span class="s">controller</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="na">args</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">--port=7472</span>
        <span class="pi">-</span> <span class="s">--config=config</span>
        <span class="na">image</span><span class="pi">:</span> <span class="s">metallb/controller:v0.8.2</span>
        <span class="na">imagePullPolicy</span><span class="pi">:</span> <span class="s">IfNotPresent</span>
        <span class="na">name</span><span class="pi">:</span> <span class="s">controller</span>
        <span class="na">ports</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">containerPort</span><span class="pi">:</span> <span class="m">7472</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">monitoring</span>
        <span class="na">resources</span><span class="pi">:</span>
          <span class="na">limits</span><span class="pi">:</span>
            <span class="na">cpu</span><span class="pi">:</span> <span class="s">100m</span>
            <span class="na">memory</span><span class="pi">:</span> <span class="s">100Mi</span>
        <span class="na">securityContext</span><span class="pi">:</span>
          <span class="na">allowPrivilegeEscalation</span><span class="pi">:</span> <span class="no">false</span>
          <span class="na">capabilities</span><span class="pi">:</span>
            <span class="na">drop</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">all</span>
          <span class="na">readOnlyRootFilesystem</span><span class="pi">:</span> <span class="no">true</span>
      <span class="na">nodeSelector</span><span class="pi">:</span>
        <span class="s">beta.kubernetes.io/os</span><span class="pi">:</span> <span class="s">linux</span>
      <span class="na">securityContext</span><span class="pi">:</span>
        <span class="na">runAsNonRoot</span><span class="pi">:</span> <span class="no">true</span>
        <span class="na">runAsUser</span><span class="pi">:</span> <span class="m">65534</span>
      <span class="na">serviceAccountName</span><span class="pi">:</span> <span class="s">controller</span>
      <span class="na">terminationGracePeriodSeconds</span><span class="pi">:</span> <span class="m">0</span>
</code></pre></div></div>

<p><br /></p>

<p><strong>namespace.yaml</strong></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Namespace</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">metallb-system</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">metallb</span>
</code></pre></div></div>

<p><br /></p>

<p><strong>namespace.yaml</strong></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#ë²„ì ¼ ëª…ì‹œ</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>

<span class="c1">#ì˜¤ë¸Œì íŠ¸ ì¢…ë¥˜ ëª…ì‹œ</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Namespace</span>

<span class="c1">#ì˜¤ë¸Œì íŠ¸ ì´ë¦„ metallb-systemìœ¼ë¡œ ì§€ì •</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">metallb-system</span>

  <span class="c1">#ë ˆì´ë¸” ì§€ì •</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">metallb</span>
</code></pre></div></div>

<p><br /></p>

<p>ì´ì œ ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆë¡œ ë³€ê²½ë  ì‘ì—…ì„ ì •ì˜í•˜ê¸° ìœ„í•´ì„œ <strong>kustomize create â€“namespace=metallb-system â€“resources namespace.yaml, metallb.yaml, metallb-l2config.yaml</strong> ëª…ë ¹ìœ¼ë¡œ <span style="color:orange; font-weight:bold">kustomization.yaml</span>ì„ ìƒì„±í•œë‹¤. ì´ë•Œ â€“namespaceëŠ” ì‘ì—…ì˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì„¤ì •í•˜ë©°, â€“resources ëª…ë ¹ì€ ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆ ëª…ë ¹ì„ ì´ìš©í•´ì„œ <strong>kustomization.yaml</strong>ë¥¼ ë§Œë“¤ê¸° ìœ„í•œ ì†ŒìŠ¤ íŒŒì¼ì„ ì •ì˜í•œë‹¤.</p>

<p><br /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kustomize create <span class="nt">--namespace</span><span class="o">=</span>metallb-system <span class="nt">--resources</span> namespace.yaml, metallb.yaml, metallb-l2config.yaml
</code></pre></div></div>

<p><br /></p>

<p>ìƒì„±í•œ kustomization.yaml íŒŒì¼ì„ ë³´ì.</p>

<p><br /></p>

<p><img src="/images/Kubernetes/kubernetes-Prometheus/2021-08-09-11-20-52.png" alt="" /></p>

<p><br /></p>

<p>ë¦¬ì†ŒìŠ¤ë¡œ <strong>namespace.yaml, metallb.yaml ê·¸ë¦¬ê³  metallb-l2config.yaml</strong>ì´ ì„¤ì •ëê³ , ë„¤ì„ìŠ¤í˜ì´ìŠ¤ëŠ” <strong>metallb-system</strong>ìœ¼ë¡œ ì„¤ì •ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<p>ì„¤ì¹˜ëœ ì´ë¯¸ì§€ë¥¼ ì•ˆì •ì ì¸ ë²„ì „ìœ¼ë¡œ ìœ ì§€í•˜ê¸° ìœ„í•´ì„œ <strong>kustomize edit set image</strong> ì˜µì…˜ì„ ì´ìš©í•´ MetalLB controllerì™€ speakerì˜ ì´ë¯¸ì§€ íƒœê·¸ë¥¼ <strong>v0.8.2</strong>ë¡œ ì§€ì •í•œë‹¤.</p>

<p><br /></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kustomize edit <span class="nb">set </span>image metallb/controller:v0.8.2
kustomize edit <span class="nb">set </span>image metallb/speaker:v0.8.2
</code></pre></div></div>

<p><br /></p>

<p>ì»¤ìŠ¤í„°ë§ˆì´ì¦ˆë¡œ ìƒì„±ëœ kustomization.yamlì— ì´ë¯¸ì§€ íƒœê·¸ ì •ë³´(v0.8.2)ê°€ ì„¤ì •ëëŠ”ì§€ í™•ì¸í•œë‹¤.</p>

<p><br /></p>

<p><img src="/images/Kubernetes/kubernetes-Prometheus/2021-08-09-11-20-26.png" alt="" /></p>

<p><br /></p>

:ET