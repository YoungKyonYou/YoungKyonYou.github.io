I"ø<p><br /><br /></p>

<h1 id="ê²€ìƒ‰ì²˜ë¦¬"><center>ê²€ìƒ‰ì²˜ë¦¬</center></h1>

<p><br /></p>

<p>ì´ë²ˆ ê²Œì‹œë¬¼ì—ì„œëŠ” í™”ë©´ì—ì„œ ê²€ìƒ‰ ì²˜ë¦¬ ê¸°ëŠ¥ì„ ì¶”ê°€í•´ ë³¸ë‹¤. ê²€ìƒ‰ ì²˜ë¦¬ëŠ” í¬ê²Œ ì„œë²„ ì‚¬ì´ë“œ ì²˜ë¦¬ì™€ í™”ë©´ ìª½ì˜ ì²˜ë¦¬ë¡œ ë‚˜ë‰œë‹¤.</p>

<p>ì„œë²„ ì‚¬ì´ë“œ ì²˜ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>

<ul>
  <li>PageRequestDTOì— ê²€ìƒ‰ íƒ€ì…(type)ê³¼ í‚¤ì›Œë“œ(keyword)ë¥¼ ì¶”ê°€</li>
  <li>ì´í•˜ ì„œë¹„ìŠ¤ ê³„ì¸µì—ì„œ Querydslì„ ì´ìš©í•´ì„œ ê²€ìƒ‰ ì²˜ë¦¬</li>
</ul>

<p><br /></p>

<p>ê²€ìƒ‰ í•­ëª©ì€ í¬ê²Œ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•œë‹¤.</p>

<ul>
  <li>â€˜ì œëª©(t), ë‚´ìš©(c), ì‘ì„±ì(w)â€™ë¡œ ê²€ìƒ‰í•˜ëŠ” ê²½ìš°</li>
  <li>â€˜ì œëª© í˜¹ì€ ë‚´ìš©(tc)â€™ìœ¼ë¡œ ê²€ìƒ‰í•˜ëŠ” ê²½ìš°</li>
  <li>â€˜ì œëª© í˜¹ì€ ë‚´ìš© í˜¹ì€ ì‘ì„±ì(tcw)â€™ë¡œ ê²€ìƒ‰í•˜ëŠ” ê²½ìš°</li>
</ul>

<p><br /></p>

<p>ê°€ì¥ ìš°ì„ ìœ¼ë¡œ PageRequestDTOì„ ê²€ìƒ‰ ì¡°ê±´(type)ê³¼ ê²€ìƒ‰ í‚¤ì›Œë“œ(keyword)ë¥¼ ì¶”ê°€í•œë‹¤.</p>

<p><strong>PageRequestDTO.java</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre></td><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">org.zerock.guestbook.dto</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">lombok.AllArgsConstructor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.Builder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">lombok.Data</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.PageRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Pageable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.data.domain.Sort</span><span class="o">;</span>

<span class="nd">@Builder</span>
<span class="nd">@AllArgsConstructor</span>
<span class="nd">@Data</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PageRequestDTO</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kt">int</span> <span class="n">page</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">size</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">type</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">keyword</span><span class="o">;</span>


    <span class="kd">public</span> <span class="nf">PageRequestDTO</span><span class="o">(){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">page</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">size</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">Pageable</span> <span class="nf">getPageable</span><span class="o">(</span><span class="nc">Sort</span> <span class="n">sort</span><span class="o">){</span>

        <span class="k">return</span> <span class="nc">PageRequest</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">page</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="n">size</span><span class="o">,</span> <span class="n">sort</span><span class="o">);</span>

    <span class="o">}</span>
<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>PageRequestDTOì—ì„œ ë³€ê²½ëœ ê²ƒì€ typeê³¼ keywordê°€ ì¶”ê°€ëœ ê²ƒë¿ì´ë‹¤.</p>

<p>ë™ì ìœ¼ë¡œ ê²€ìƒ‰ ì¡°ê±´ì´ ì²˜ë¦¬ë˜ëŠ” ê²½ìš°ì˜ ì‹¤ì œ ì½”ë”©ì€ Querydslì„ í†µí•´ì„œ BooleanBuilderë¥¼ ì‘ì„±í•˜ê³  GuestbookRepositoryëŠ” Querydslë¡œ ì‘ì„±ëœ BooleanBuilderë¥¼ findAll()ì²˜ë¦¬í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•œë‹¤. BooleanBuilder ì‘ì„±ì€ ë³„ë„ì˜ í´ë˜ìŠ¤ ë“±ì„ ì‘ì„±í•´ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆì§€ë§Œ ê°„ë‹¨íˆ í•˜ë ¤ë©´ GuestbookServiceImpl ë‚´ì— ë©”ì„œë“œë¥¼ í•˜ë‚˜ ì‘ì„±í•´ì„œ ì²˜ë¦¬í•˜ë©´ ëœë‹¤.</p>

<p><strong>GuestbookServiceImpl.java ì¼ë¶€</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
</pre></td><td class="rouge-code"><pre><span class="o">(...)</span>
<span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">GuestbookDTO</span> <span class="nf">read</span><span class="o">(</span><span class="nc">Long</span> <span class="n">gno</span><span class="o">)</span> <span class="o">{</span>
         <span class="o">(...)</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">remove</span><span class="o">(</span><span class="nc">Long</span> <span class="n">gno</span><span class="o">)</span> <span class="o">{</span>

         <span class="o">(...)</span>

    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">modify</span><span class="o">(</span><span class="nc">GuestbookDTO</span> <span class="n">dto</span><span class="o">)</span> <span class="o">{</span>
        <span class="o">(...)</span>
    <span class="o">}</span>


    <span class="kd">private</span> <span class="nc">BooleanBuilder</span> <span class="nf">getSearch</span><span class="o">(</span><span class="nc">PageRequestDTO</span> <span class="n">requestDTO</span><span class="o">){</span>

        <span class="nc">String</span> <span class="n">type</span> <span class="o">=</span> <span class="n">requestDTO</span><span class="o">.</span><span class="na">getType</span><span class="o">();</span>

        <span class="nc">BooleanBuilder</span> <span class="n">booleanBuilder</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BooleanBuilder</span><span class="o">();</span>

        <span class="nc">QGuestbook</span> <span class="n">qGuestbook</span> <span class="o">=</span> <span class="nc">QGuestbook</span><span class="o">.</span><span class="na">guestbook</span><span class="o">;</span>

        <span class="nc">String</span> <span class="n">keyword</span> <span class="o">=</span> <span class="n">requestDTO</span><span class="o">.</span><span class="na">getKeyword</span><span class="o">();</span>

        <span class="nc">BooleanExpression</span> <span class="n">expression</span> <span class="o">=</span> <span class="n">qGuestbook</span><span class="o">.</span><span class="na">gno</span><span class="o">.</span><span class="na">gt</span><span class="o">(</span><span class="mi">0L</span><span class="o">);</span> <span class="c1">// gno &gt; 0 ì¡°ê±´ë§Œ ìƒì„±</span>

        <span class="n">booleanBuilder</span><span class="o">.</span><span class="na">and</span><span class="o">(</span><span class="n">expression</span><span class="o">);</span>

        <span class="k">if</span><span class="o">(</span><span class="n">type</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">type</span><span class="o">.</span><span class="na">trim</span><span class="o">().</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">){</span> <span class="c1">//ê²€ìƒ‰ ì¡°ê±´ì´ ì—†ëŠ” ê²½ìš°</span>
            <span class="k">return</span> <span class="n">booleanBuilder</span><span class="o">;</span>
        <span class="o">}</span>


        <span class="c1">//ê²€ìƒ‰ ì¡°ê±´ì„ ì‘ì„±í•˜ê¸°</span>
        <span class="nc">BooleanBuilder</span> <span class="n">conditionBuilder</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BooleanBuilder</span><span class="o">();</span>

        <span class="k">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"t"</span><span class="o">)){</span>
            <span class="n">conditionBuilder</span><span class="o">.</span><span class="na">or</span><span class="o">(</span><span class="n">qGuestbook</span><span class="o">.</span><span class="na">title</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">keyword</span><span class="o">));</span>
        <span class="o">}</span>
        <span class="k">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"c"</span><span class="o">)){</span>
            <span class="n">conditionBuilder</span><span class="o">.</span><span class="na">or</span><span class="o">(</span><span class="n">qGuestbook</span><span class="o">.</span><span class="na">content</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">keyword</span><span class="o">));</span>
        <span class="o">}</span>
        <span class="k">if</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"w"</span><span class="o">)){</span>
            <span class="n">conditionBuilder</span><span class="o">.</span><span class="na">or</span><span class="o">(</span><span class="n">qGuestbook</span><span class="o">.</span><span class="na">writer</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">keyword</span><span class="o">));</span>
        <span class="o">}</span>

        <span class="c1">//ëª¨ë“  ì¡°ê±´ í†µí•©</span>
        <span class="n">booleanBuilder</span><span class="o">.</span><span class="na">and</span><span class="o">(</span><span class="n">conditionBuilder</span><span class="o">);</span>

        <span class="k">return</span> <span class="n">booleanBuilder</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>GuestbookServiceImplì— ì‘ì„±í•œ getSearch()ëŠ” PageRequestDTOë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ì„œ ê²€ìƒ‰ ì¡°ê±´(type)ì´ ìˆëŠ” ê²½ìš°ì—ëŠ” conditionBuilder ë³€ìˆ˜ë¥¼ ìƒì„±í•´ì„œ ê° ê²€ìƒ‰ ì¡°ê±´ì„ â€˜orâ€™ë¡œ ì—°ê²°í•´ì„œ ì²˜ë¦¬í•œë‹¤. ë°˜ë©´ì— ê²€ìƒ‰ ì¡°ê±´ì´ ì—†ë‹¤ë©´ â€˜gno&gt;0â€™ìœ¼ë¡œë§Œ ìƒì„±ëœë‹¤. GuestbookServiceImplì—ì„œ ëª©ë¡ì„ ì¡°íšŒí•  ë•Œ ì‚¬ìš©í•˜ëŠ” getList()ëŠ” ê¸°ì¡´ì˜ ì½”ë“œë¥¼ ì¡°ê¸ˆ ìˆ˜ì •í•´ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•œë‹¤.</p>

<p><br /></p>

<p><strong>GuestbookServiceImpl.java ì¼ë¶€</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre>    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">PageResultDTO</span><span class="o">&lt;</span><span class="nc">GuestbookDTO</span><span class="o">,</span> <span class="nc">Guestbook</span><span class="o">&gt;</span> <span class="nf">getList</span><span class="o">(</span><span class="nc">PageRequestDTO</span> <span class="n">requestDTO</span><span class="o">)</span> <span class="o">{</span>

        <span class="nc">Pageable</span> <span class="n">pageable</span> <span class="o">=</span> <span class="n">requestDTO</span><span class="o">.</span><span class="na">getPageable</span><span class="o">(</span><span class="nc">Sort</span><span class="o">.</span><span class="na">by</span><span class="o">(</span><span class="s">"gno"</span><span class="o">).</span><span class="na">descending</span><span class="o">());</span>

        <span class="nc">BooleanBuilder</span> <span class="n">booleanBuilder</span><span class="o">=</span><span class="n">getSearch</span><span class="o">(</span><span class="n">requestDTO</span><span class="o">);</span>

        <span class="nc">Page</span><span class="o">&lt;</span><span class="nc">Guestbook</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">repository</span><span class="o">.</span><span class="na">findAll</span><span class="o">(</span><span class="n">booleanBuilder</span><span class="o">,</span><span class="n">pageable</span><span class="o">);</span>

        <span class="nc">Function</span><span class="o">&lt;</span><span class="nc">Guestbook</span><span class="o">,</span> <span class="nc">GuestbookDTO</span><span class="o">&gt;</span> <span class="n">fn</span> <span class="o">=</span> <span class="o">(</span><span class="n">entity</span> <span class="o">-&gt;</span> <span class="n">entityToDto</span><span class="o">(</span><span class="n">entity</span><span class="o">));</span>


        <span class="k">return</span> <span class="k">new</span> <span class="nc">PageResultDTO</span><span class="o">&lt;&gt;(</span><span class="n">result</span><span class="o">,</span> <span class="n">fn</span> <span class="o">);</span>
    <span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>ìœ„ì™€ ê°™ì´ ì„œë¹„ìŠ¤ ì˜ì—­ì—ì„œ ê²€ìƒ‰ ì¡°ê±´ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í–ˆë‹¤ë©´ í…ŒìŠ¤íŠ¸ ì½”ë“œë¡œ ê²°ê³¼ë¥¼ í™•ì¸í•œë‹¤.</p>

<p><img src="/images/Learning_SpringBoot_with_Web_Project/Part4/Chapter7/2021-03-13-13-34-27.png" alt="" /></p>

<p><br /></p>

<p><strong>GuestbookServiceTests.java ì¼ë¶€</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre><span class="nd">@Test</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testSearch</span><span class="o">(){</span>
        <span class="nc">PageRequestDTO</span> <span class="n">pageRequestDTO</span><span class="o">=</span><span class="nc">PageRequestDTO</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">page</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
                <span class="o">.</span><span class="na">size</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span>
                <span class="o">.</span><span class="na">type</span><span class="o">(</span><span class="s">"tc"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">keyword</span><span class="o">(</span><span class="s">"í•œê¸€"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
        <span class="nc">PageResultDTO</span><span class="o">&lt;</span><span class="nc">GuestbookDTO</span><span class="o">,</span> <span class="nc">Guestbook</span><span class="o">&gt;</span> <span class="n">resultDTO</span><span class="o">=</span><span class="n">service</span><span class="o">.</span><span class="na">getList</span><span class="o">(</span><span class="n">pageRequestDTO</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"PREV: "</span><span class="o">+</span><span class="n">resultDTO</span><span class="o">.</span><span class="na">isPrev</span><span class="o">());</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"NEXT: "</span><span class="o">+</span><span class="n">resultDTO</span><span class="o">.</span><span class="na">isNext</span><span class="o">());</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"TOTAL: "</span><span class="o">+</span><span class="n">resultDTO</span><span class="o">.</span><span class="na">getTotalPage</span><span class="o">());</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"-----------------------------------"</span><span class="o">);</span>
        <span class="k">for</span><span class="o">(</span><span class="nc">GuestbookDTO</span> <span class="nl">guestbookDTO:</span><span class="n">resultDTO</span><span class="o">.</span><span class="na">getDtoList</span><span class="o">()){</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">guestbookDTO</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"==================================="</span><span class="o">);</span>
        <span class="n">resultDTO</span><span class="o">.</span><span class="na">getPageList</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="n">i</span><span class="o">-&gt;</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">));</span>

    <span class="o">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>ìœ„ì˜ ì½”ë“œëŠ” â€˜ì œëª©(t)ì´ë‚˜ ë‚´ìš©(c)â€™ì— â€˜í•œê¸€â€™ì´ë¼ëŠ” í‚¤ì›Œë“œê°€ ìˆëŠ” ê¸€ì„ ê²€ìƒ‰í•œë‹¤. ë‹¤ì‹œ ë¶€ì—° ì„¤ëª…ì„ í•˜ìë©´ pageRequestDTOì—ì„œ sizeë¥¼ 10ìœ¼ë¡œ í•˜ëŠ” pageë“¤ë¡œ êµ¬ì„±í•˜ë¼ëŠ” ì˜ë¯¸ì™€ â€˜tcâ€™ëŠ” ì œëª©ê³¼ ë‚´ìš©ì„ ì˜ë¯¸í•œë‹¤. ê±°ê¸°ì„œ keyword â€˜í•œê¸€â€™ì´ë¼ê³  ë˜ì–´ ìˆëŠ” ê²Œì‹œë¬¼ì„ ì°¾ëŠ” ê²ƒì´ë‹¤. í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë‚´ìš©ê³¼ ì œëª©ì´ â€˜í•œê¸€â€™ë¡œ ë˜ì–´ ìˆëŠ” ê²Œì‹œë¬¼ì´ ì—†ê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì˜¨ë‹¤.</p>

<p><img src="/images/Learning_SpringBoot_with_Web_Project/Part4/Chapter7/2021-03-13-13-44-33.png" alt="" /></p>

<p><br /></p>

<p>ê²€ìƒ‰ ì²˜ë¦¬ë¥¼ ìœ„í•´ì„œëŠ” í™”ë©´ì—ì„œ ê²€ìƒ‰ íƒ€ì…(type)ê³¼ í‚¤ì›Œë“œ(keyword)ë¥¼ ì…ë ¥í•  ìˆ˜ ìˆëŠ” UIê°€ í•„ìš”í•˜ë‹¤. ê²€ìƒ‰ ìì²´ê°€ GET ë°©ì‹ì´ë¯€ë¡œ í•œê¸€ì´ ì•„ë‹ˆë©´ ê°„ë‹¨íˆ GET ë°©ì‹ì˜ ì¿¼ë¦¬ ìŠ¤íŠ¸ë§(query string)ì„ ì¡°ì‘í•´ì„œ ì¶©ë¶„íˆ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ í”„ë¡œì íŠ¸ë¥¼ ì‹¤í–‰í•œ ìƒíƒœì—ì„œ ë¸Œë¼ìš°ì €ì˜ ì£¼ì†Œì°½ì—ì„œ â€˜/guestbook/list?page=1?type=t&amp;keyword=11â€™ ê°™ì´ ì¡°ì‘í•˜ë©´ â€˜ì œëª©â€™ ì•ˆì— â€˜11â€™ì´ë¼ëŠ” ë¬¸ìì—´ì´ í¬í•¨ëœ ê¸€ë“¤ì˜ 1í˜ì´ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<p>ì¼ë‹¨ ëª©ë¡ í™”ë©´ì„ ì²˜ë¦¬í•˜ëŠ” list.htmlì—ëŠ” â€˜ê²€ìƒ‰ íƒ€ì…â€™ê³¼ â€˜í‚¤ì›Œë“œâ€™ë¥¼ ì…ë ¥í•˜ê³  â€˜ê²€ìƒ‰â€™ ë²„íŠ¼ì„ ì¶”ê°€í•´ì•¼ í•œë‹¤.</p>

<p><img src="/images/Learning_SpringBoot_with_Web_Project/Part4/Chapter7/2021-03-13-13-47-57.png" alt="" /></p>

<p><br /></p>

<p><strong>list.html ì¼ë¶€</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
</pre></td><td class="rouge-code"><pre>(...)
<span class="nt">&lt;h1</span> <span class="na">class=</span><span class="s">"mt-4"</span><span class="nt">&gt;</span>
  GuestBook List Page
  <span class="nt">&lt;span&gt;</span>
    <span class="nt">&lt;a</span> <span class="na">th:href=</span><span class="s">"@{/guestbook/register}"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"btn btn-outline-primary"</span><span class="nt">&gt;</span>REGISTER<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;/span&gt;</span>
<span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/guestbook/list"</span> <span class="na">method=</span><span class="s">"get"</span> <span class="na">id=</span><span class="s">"searchForm"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"page"</span> <span class="na">value=</span><span class="s">"1"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group-prepend"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;select</span> <span class="na">class=</span><span class="s">"custom-select"</span> <span class="na">name=</span><span class="s">"type"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;option</span> <span class="na">th:selected=</span><span class="s">"${pageRequestDTO.type == null}"</span><span class="nt">&gt;</span>-------<span class="nt">&lt;/option&gt;</span>
        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"t"</span> <span class="na">th:selected=</span><span class="s">"${pageRequestDTO.type =='t'}"</span><span class="nt">&gt;</span>
          ì œëª©
        <span class="nt">&lt;/option&gt;</span>
        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"c"</span> <span class="na">th:selected=</span><span class="s">"${pageRequestDTO.type =='c'}"</span><span class="nt">&gt;</span>
          ë‚´ìš©
        <span class="nt">&lt;/option&gt;</span>
        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"w"</span> <span class="na">th:selected=</span><span class="s">"${pageRequestDTO.type =='w'}"</span><span class="nt">&gt;</span>
          ì‘ì„±ì
        <span class="nt">&lt;/option&gt;</span>
        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"tc"</span> <span class="na">th:selected=</span><span class="s">"${pageRequestDTO.type =='tc'}"</span><span class="nt">&gt;</span>
          ì œëª© + ë‚´ìš©
        <span class="nt">&lt;/option&gt;</span>
        <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">"tcw"</span> <span class="na">th:selected=</span><span class="s">"${pageRequestDTO.type =='tcw'}"</span><span class="nt">&gt;</span>
          ì œëª© + ë‚´ìš© + ì‘ì„±ì
        <span class="nt">&lt;/option&gt;</span>
      <span class="nt">&lt;/select&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;input</span>
      <span class="na">class=</span><span class="s">"form-control"</span>
      <span class="na">name=</span><span class="s">"keyword"</span>
      <span class="na">th:value=</span><span class="s">"${pageRequestDTO.keyword}"</span>
    <span class="nt">/&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"input-group-append"</span> <span class="na">id=</span><span class="s">"button-addon4"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"btn btn-outline-secondary btn-search"</span> <span class="na">type=</span><span class="s">"button"</span><span class="nt">&gt;</span>
        Search
      <span class="nt">&lt;/button&gt;</span>
      <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"btn btn-outline-secondary btn-clear"</span> <span class="na">type=</span><span class="s">"button"</span><span class="nt">&gt;</span>
        Clear
      <span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/form&gt;</span>
(...)
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>list.htmlì—ëŠ” ìƒˆë¡­ê²Œ í•˜ë‚˜ì˜ &lt;form&gt; íƒœê·¸ì™€ &lt;select&gt; íƒœê·¸ ë“±ì´ ì¶”ê°€ë˜ì—ˆë‹¤. &lt;select&gt; íƒœê·¸ëŠ” ê²€ìƒ‰ íƒ€ì…ì„ ì„ íƒí•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•˜ëŠ”ë° PageRequestDTOë¥¼ ì´ìš©í•´ì„œ ê²€ìƒ‰ íƒ€ì…ì— ë§ê²Œ ìë™ìœ¼ë¡œ ì„ íƒë  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•œë‹¤. í‚¤ì›Œë“œëŠ” &lt;input&gt; íƒœê·¸ë¡œ ì²˜ë¦¬í•œë‹¤. ì—¬ê¸°ê¹Œì§€ êµ¬ì„±í•œ ìƒíƒœì—ì„œ â€˜/guestbook/list?page=1&amp;type=t&amp;keyword=11â€™ê³¼ ê°™ì´ ë¸Œë¼ìš°ì €ì˜ ì£¼ì†Œì°½ì„ ì¡°ì‘í•˜ë©´ í•´ë‹¹ ê²€ìƒ‰ íƒ€ì…ê³¼ í‚¤ì›Œë“œê°€ ì…ë ¥ëœ í˜•íƒœë¡œ ì¶œë ¥ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<p><img src="../images/Learning_SpringBoot_with_Web_Project/Part4/Chapter7/2021-03-13-14-01-07.png" alt="" /></p>

<p><br /></p>

<p>â€˜Searchâ€™ ë²„íŠ¼ì„ ëˆ„ë¥´ëŠ” ê²ƒì€ ìƒˆë¡­ê²Œ ê²€ìƒ‰ì„ ì§„í–‰í•˜ëŠ” ê²ƒì´ë¯€ë¡œ ë¬´ì¡°ê±´ 1í˜ì´ì§€ë¥¼ ì§€ì •í•˜ë„ë¡ í•œë‹¤. â€˜Clearâ€™ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ëª¨ë“  ê²€ìƒ‰ ì¡°ê±´ ì—†ì´ ìƒˆë¡œ ëª©ë¡ í˜ì´ì§€ë¥¼ ë³´ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì´ì œ list.html ì•„ë˜ìª½ì— ì´ë²¤íŠ¸ ì²˜ë¦¬ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì¶”ê°€í•œë‹¤.</p>

<p><strong>list.htmlì˜ í•˜ë‹¨</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre>(...)
<span class="nt">&lt;script </span><span class="na">th:inline=</span><span class="s">"javascript"</span><span class="nt">&gt;</span>

  <span class="kd">var</span> <span class="nx">msg</span> <span class="o">=</span> <span class="p">[[</span><span class="nx">$</span><span class="p">{</span><span class="nx">msg</span><span class="p">}]];</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">msg</span><span class="p">);</span>

  <span class="k">if</span><span class="p">(</span><span class="nx">msg</span><span class="p">){</span>
      <span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">.modal</span><span class="dl">"</span><span class="p">).</span><span class="nx">modal</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">searchForm</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">#searchForm</span><span class="dl">"</span><span class="p">);</span>

  <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.btn-search</span><span class="dl">'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>

      <span class="nx">searchForm</span><span class="p">.</span><span class="nx">submit</span><span class="p">();</span>

  <span class="p">});</span>

  <span class="nx">$</span><span class="p">(</span><span class="dl">'</span><span class="s1">.btn-clear</span><span class="dl">'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>

      <span class="nx">searchForm</span><span class="p">.</span><span class="nx">empty</span><span class="p">().</span><span class="nx">submit</span><span class="p">();</span>

  <span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>â€˜btn-searchâ€™ë¥¼ í´ë¦­í•˜ë©´ ìƒˆë¡­ê²Œ ì„ íƒëœ ê²€ìƒ‰ íƒ€ì…ê³¼ í‚¤ì›Œë“œë¡œ 1í˜ì´ì§€ë¥¼ ê²€ìƒ‰í•˜ê³ , â€˜btn-clearâ€™ë¥¼ í´ë¦­í•˜ë©´ ëª¨ë“  ê²€ìƒ‰ê³¼ ê´€ë ¨ëœ ë‚´ìš©ì„ ì‚­ì œí•˜ê³  ê²€ìƒ‰ì´ ì—†ëŠ” ëª©ë¡ í˜ì´ì§€ë¥¼ í˜¸ì¶œí•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ â€˜ì œëª©+ë‚´ìš©â€™ì„ ì„ íƒí•˜ê³  í‚¤ì›Œë“œë¥¼ â€˜123â€™ìœ¼ë¡œ í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì²˜ë¦¬ ëœë‹¤.(ì•„ë˜ ì²« ë²ˆì§¸ ì‚¬ì§„) ë§Œì¼ í™”ë©´ì—ì„œ â€˜Clearâ€™ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ëª¨ë“  ê²€ìƒ‰ ì¡°ê±´ê³¼ í˜ì´ì§€ ë²ˆí˜¸ëŠ” ì´ˆê¸°í™” ëœë‹¤. (ì•„ë˜ ë‘ ë²ˆì§¸ ì‚¬ì§„)</p>

<p><img src="/images/Learning_SpringBoot_with_Web_Project/Part4/Chapter7/2021-03-13-14-05-13.png" alt="" /></p>

<p><br /></p>

<p><img src="/images/Learning_SpringBoot_with_Web_Project/Part4/Chapter7/2021-03-13-14-05-28.png" alt="" /></p>

<p><br /></p>

<p>ëª©ë¡ í˜ì´ì§€ í•˜ë‹¨ì˜ ê²€ìƒ‰ì€ ë‹¨ìˆœíˆ pageë¼ëŠ” ê°’ë§Œì„ ì²˜ë¦¬í•˜ë¯€ë¡œ, ê²€ìƒ‰ íƒ€ì…(type)ê³¼ í‚¤ì›Œë“œ(keyword)ë¥¼ ì¶”ê°€í•´ ì£¼ì–´ì•¼ í•œë‹¤.</p>

<p><strong>list.html ì¼ë¶€</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"pagination h-100 justify-content-center align-items-center"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"page-item "</span> <span class="na">th:if=</span><span class="s">"${result.prev}"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span>
      <span class="na">class=</span><span class="s">"page-link"</span>
      <span class="na">th:href=</span><span class="s">"@{/guestbook/list(page= ${result.start -1},
                    type=${pageRequestDTO.type} ,
                    keyword = ${pageRequestDTO.keyword} ) }"</span>
      <span class="na">tabindex=</span><span class="s">"-1"</span>
      <span class="nt">&gt;</span>Previous<span class="nt">&lt;/a</span>
    <span class="nt">&gt;</span>
  <span class="nt">&lt;/li&gt;</span>

  <span class="nt">&lt;li</span>
    <span class="na">th:class=</span><span class="s">" 'page-item ' + ${result.page == page?'active':''} "</span>
    <span class="na">th:each=</span><span class="s">"page: ${result.pageList}"</span>
  <span class="nt">&gt;</span>
    <span class="nt">&lt;a</span>
      <span class="na">class=</span><span class="s">"page-link"</span>
      <span class="na">th:href=</span><span class="s">"@{/guestbook/list(page = ${page} ,
                   type=${pageRequestDTO.type} ,
                   keyword = ${pageRequestDTO.keyword}  )}"</span>
    <span class="nt">&gt;</span>
      [[${page}]]
    <span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;/li&gt;</span>

  <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">"page-item"</span> <span class="na">th:if=</span><span class="s">"${result.next}"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span>
      <span class="na">class=</span><span class="s">"page-link"</span>
      <span class="na">th:href=</span><span class="s">"@{/guestbook/list(page= ${result.end + 1} ,
                    type=${pageRequestDTO.type} ,
                    keyword = ${pageRequestDTO.keyword} )}"</span>
      <span class="nt">&gt;</span>Next<span class="nt">&lt;/a</span>
    <span class="nt">&gt;</span>
  <span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>ëª©ë¡ í˜ì´ì§€ì—ì„œ ë§ˆì§€ë§‰ìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ë‚´ìš©ì€ íŠ¹ì • ê¸€ì˜ ë²ˆí˜¸ë¥¼ í´ë¦­í•´ì„œ ì´ë™í•˜ëŠ” ë¶€ë¶„ì´ë‹¤. ì´ëŠ” í˜ì´ì§€ ì²˜ë¦¬ì™€ ë™ì¼í•˜ê²Œ typeê³¼ keyword í•­ëª©ì„ ì¶”ê°€í•˜ë©´ ëœë‹¤.</p>

<p><strong>list.html ì¼ë¶€</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre>(...)
<span class="nt">&lt;tr</span> <span class="na">th:each=</span><span class="s">"dto : ${result.dtoList}"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;th</span> <span class="na">scope=</span><span class="s">"row"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;a</span>
      <span class="na">th:href=</span><span class="s">"@{/guestbook/read(gno = ${dto.gno},
           page= ${result.page},
           type=${pageRequestDTO.type} ,
        keyword = ${pageRequestDTO.keyword})}"</span>
    <span class="nt">&gt;</span>
      [[${dto.gno}]]
    <span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;/th&gt;</span>
  <span class="nt">&lt;td&gt;</span>[[${dto.title}]]<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;td&gt;</span>[[${dto.writer}]]<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;td&gt;</span>[[${#temporals.format(dto.regDate, 'yyyy/MM/dd')}]]<span class="nt">&lt;/td&gt;</span>
<span class="nt">&lt;/tr&gt;</span>
(...)
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>í™”ë©´ì—ì„œëŠ” íŠ¹ì • ê¸€ì˜ ë²ˆí˜¸ë¥¼ ì„ íƒí•˜ë©´ ê¸°ì¡´ê³¼ ë‹¤ë¥´ê²Œ typeê³¼ keyword íŒŒë¼ë¯¸í„°ê°€ ì¶”ê°€ë¡œ ì „ì†¡ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<p>ê¸°ì¡´ì˜ ì¡°íšŒ í˜ì´ì§€ëŠ” page ê°’ë§Œ ì²˜ë¦¬í–ˆê¸° ë•Œë¬¸ì— ë‹¤ì‹œ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ëŠ” ë§í¬ ì•ì—ì„œ ì²˜ë¦¬í•œ ê²ƒê³¼ ë™ì¼í•˜ê²Œ typeê³¼ keyword ê°’ì„ ì¶”ê°€í•´ ì£¼ì–´ì•¼ í•œë‹¤. ì¡°íšŒ í˜ì´ì§€ëŠ” PageRequestDTOë¥¼ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ @ModealAttributeë¥¼ ì´ìš©í•´ì„œ â€˜requestDTOâ€™ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³  ìˆë‹¤.</p>

<p><strong>read.html í•˜ë‹¨ì˜ ë§í¬ ì²˜ë¦¬</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre><span class="nt">&lt;a</span>
  <span class="na">th:href=</span><span class="s">"@{/guestbook/modify(gno = ${dto.gno}, page=${requestDTO.page},
   type=${requestDTO.type}, keyword =${requestDTO.keyword})}"</span>
<span class="nt">&gt;</span>
  <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"btn btn-primary"</span><span class="nt">&gt;</span>Modify<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/a&gt;</span>

<span class="nt">&lt;a</span>
  <span class="na">th:href=</span><span class="s">"@{/guestbook/list(page=${requestDTO.page} , 
  type=${requestDTO.type}, keyword =${requestDTO.keyword})}"</span>
<span class="nt">&gt;</span>
  <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"btn btn-info"</span><span class="nt">&gt;</span>List<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/a&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>ì¡°íšŒ í˜ì´ì§€ì˜ ê²€ìƒ‰ ì²˜ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ìˆœì„œë¡œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<ul>
  <li>ëª©ë¡ í˜ì´ì§€ì—ì„œ íŠ¹ì •í•œ ì¡°ê±´ìœ¼ë¡œ ê²€ìƒ‰ì„ ìˆ˜í–‰</li>
  <li>ê²€ìƒ‰í•œ ìƒíƒœì—ì„œ íŠ¹ì • ê¸€ì„ ì„ íƒí•´ì„œ ì¡°íšŒ í˜ì´ì§€ë¡œ ì´ë™</li>
  <li>ì¡°íšŒ í˜ì´ì§€ì—ì„œ ëª©ë¡ í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” ë²„íŠ¼ì„ í´ë¦­í•´ì„œ ì´ë™</li>
</ul>

<p><br /></p>

<p>GuestbookControllerëŠ” ì‘ì—…ì´ ëë‚œ í›„ì— RedirectAttributesë¥¼ ì´ìš©í•´ì„œ ì´ë™í•˜ëŠ” ê²½ìš°ê°€ ì¢…ì¢… ìˆë‹¤.</p>

<ul>
  <li>ë“±ë¡ ì²˜ë¦¬: 1í˜ì´ì§€ë¡œ ì´ë™</li>
  <li>ì‚­ì œ ì²˜ë¦¬: 1í˜ì´ì§€ë¡œ ì´ë™</li>
  <li>ìˆ˜ì • ì²˜ë¦¬: ì¡°íšŒ í˜ì´ì§€ë¡œ ì´ë™</li>
</ul>

<p><br /></p>

<p>ìˆ˜ì •ì€ ë‹¤ì‹œ ì¡°íšŒ í˜ì´ì§€ë¡œ ì´ë™í•˜ê¸° ë•Œë¬¸ì— ê²€ìƒ‰ ì¡°ê±´ì„ ê°™ì´ ìœ ì§€í•´ì•¼ë§Œ í•œë‹¤. ì¡°íšŒ í˜ì´ì§€ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ pageë¿ ì•„ë‹ˆë¼ typeê³¼ keywordë¥¼ ì²˜ë¦¬í•´ì•¼ í•œë‹¤.</p>

<p>*modify.html ì¼ë¶€**</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre>(...)
<span class="nt">&lt;form</span> <span class="na">action=</span><span class="s">"/guestbook/modify"</span> <span class="na">method=</span><span class="s">"post"</span><span class="nt">&gt;</span>

            <span class="c">&lt;!--í˜ì´ì§€ ë²ˆí˜¸  --&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"page"</span> <span class="na">th:value=</span><span class="s">"${requestDTO.page}"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"type"</span> <span class="na">th:value=</span><span class="s">"${requestDTO.type}"</span> <span class="nt">&gt;</span>
            <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"hidden"</span> <span class="na">name=</span><span class="s">"keyword"</span> <span class="na">th:value=</span><span class="s">"${requestDTO.keyword}"</span> <span class="nt">&gt;</span>


            <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;label</span> <span class="nt">&gt;</span>Gno<span class="nt">&lt;/label&gt;</span>
                <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">name=</span><span class="s">"gno"</span> <span class="na">th:value=</span><span class="s">"${dto.gno}"</span> <span class="na">readonly</span> <span class="nt">&gt;</span>
            <span class="nt">&lt;/div&gt;</span>
(...)
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>ê¸°ì¡´ì˜ ì½”ë“œì— typeê³¼ keyword ë¶€ë¶„ì´ ì¶”ê°€ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ìˆ˜ì • í˜ì´ì§€ì—ì„œ ë‹¤ì‹œ ëª©ë¡ í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” ê²½ìš°ì—ë„ typeê³¼ keywordê°€ ê°™ì´ ì „ë‹¬ë  ìˆ˜ ìˆë„ë¡ ì´ë²¤íŠ¸ ì²˜ë¦¬ ë¶€ë¶„ë„ ì•½ê°„ ìˆ˜ì •ì´ í•„ìš”í•˜ë‹¤.</p>

<p><strong>modify.html ì¼ë¶€</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="rouge-code"><pre>(...)
 $(".listBtn").click(function() {

    var page = $("input[name='page']");
    var type = $("input[name='type']");
    var keyword = $("input[name='keyword']");

    actionForm.empty(); //form íƒœê·¸ì˜ ëª¨ë“  ë‚´ìš©ì„ ì§€ìš°ê³ 

    actionForm.append(page);
    actionForm.append(type);
    actionForm.append(keyword);


    actionForm
        .attr("action", "/guestbook/list")
        .attr("method","get");

    actionForm.submit();

})
(...)
</pre></td></tr></tbody></table></code></pre></div></div>

<p><br /></p>

<p>ìˆ˜ì •ëœ ë¶€ë¶„ì€ pageë¿ ì•„ë‹ˆë¼ typeê³¼ keyword ë¶€ë¶„ë„ ê°™ì´ ë³´ê´€í–ˆë‹¤ê°€ &lt;form&gt; íƒœê·¸ì™€ ê°™ì´ ì „ì†¡í•˜ë„ë¡ ìˆ˜ì •í•œ ê²ƒì´ë‹¤. ìˆ˜ì • ì‘ì—…ì˜ ë§ˆì§€ë§‰ì€ GuestbookControllerì—ì„œ ìˆ˜ì •í•œ í›„ì— í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì²˜ë¦¬ë  ëŒ€ ê²€ìƒ‰ ì¡°ê±´ì„ ìœ ì§€í•˜ë„ë¡ ì¶”ê°€í•´ ì£¼ëŠ” ê²ƒì´ë‹¤.</p>

<p><strong>GuestbookController.java</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>
</pre></td></tr></tbody></table></code></pre></div></div>
:ET