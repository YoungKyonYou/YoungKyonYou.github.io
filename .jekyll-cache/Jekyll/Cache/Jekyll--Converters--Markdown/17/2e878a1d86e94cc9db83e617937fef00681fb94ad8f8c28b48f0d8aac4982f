I"¯<p><em>í•´ë‹¹ ë‚´ìš©ì€ ì±… â€˜ì½”ë“œë¡œ ë°°ìš°ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ ì›¹ í”„ë¡œì íŠ¸â€™ì— ë‚˜ì˜¤ëŠ” ë‚´ìš©ì´ë©° ì´ëŠ” ê°œì¸ì ìœ¼ë¡œ ê³µë¶€í•˜ê¸° ìœ„í•´ ê¸°ë¡í•¨ì„ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤</em></p>

<p><br /><br /></p>

<h1 id="thymeleafcontrollerì—ì„œ-ì‚¬ìš©ì-ì •ë³´-ì¶œë ¥í•˜ê¸°"><center>Thymeleaf/Controllerì—ì„œ ì‚¬ìš©ì ì •ë³´ ì¶œë ¥í•˜ê¸°</center></h1>

<p><br /></p>

<p>ë¡œê·¸ì¸ì´ ì •ìƒì ìœ¼ë¡œ ì²˜ë¦¬ë˜ì—ˆë‹¤ë©´ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ í™”ë©´ì´ë‚˜ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì¶œë ¥í•˜ëŠ” ì‘ì—…ì„ ì‹œë„í•´ ë³¸ë‹¤.</p>

<p>member.htmlë¥¼ ìˆ˜ì •í•œë‹¤.</p>

<p><br /></p>

<p><strong>member.html</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;title&gt;</span>Title<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>For Member<span class="nt">&lt;/h1&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">sec:authorize=</span><span class="s">"hasRole('USER')"</span><span class="nt">&gt;</span>Has USER ROLE<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">sec:authorize=</span><span class="s">"hasRole('MANAGER')"</span><span class="nt">&gt;</span>Has MANAGER ROLE<span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">sec:authorize=</span><span class="s">"hasRole('ADMIN')"</span><span class="nt">&gt;</span>Has ADMIN ROLE<span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;div</span> <span class="na">sec:authorize=</span><span class="s">"isAuthenticated()"</span><span class="nt">&gt;</span>
      Only Authenticated user can see this Text
    <span class="nt">&lt;/div&gt;</span>

    Authenticated username:
    <span class="nt">&lt;div</span> <span class="na">sec:authentication=</span><span class="s">"name"</span><span class="nt">&gt;&lt;/div&gt;</span>
    Authenticated user roles:
    <span class="nt">&lt;div</span> <span class="na">sec:authentication=</span><span class="s">"principal.authorities"</span><span class="nt">&gt;&lt;/div&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p><br /></p>

<p><strong>sec</strong>ì€ ì‹œíë¦¬í‹°ì™€ ê´€ë ¨ëœ ë¶€ë¶„ì„ ì²˜ë¦¬í•˜ëŠ”ë° ì‚¬ìš©í•œë‹¤.
<br /></p>

<p>sec:authorizeë¥¼ ì´ìš©í•˜ë©´ ì¸ê°€(authorization)ì™€ ê´€ë ¨ëœ ì •ë³´ë¥¼ ì•Œì•„ë‚´ê±°ë‚˜ ì œì–´ê°€ ê°€ëŠ¥í•˜ë‹¤. Authenticationì˜ principalì´ë¼ëŠ” ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ClubAuthMemberDTOì˜ ë‚´ìš©ì„ ì´ìš©í•  ìˆ˜ ìˆë‹¤. ì •ìƒì ìœ¼ë¡œ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìëŠ” ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>

<p><br /></p>

<p><img src="/images/Learning_SpringBoot_with_Web_Project/Part5/Chapter10/10-5/2021-07-26-17-36-48.png" alt="" /></p>

<p><br /></p>

<p>ì´ì œ @AuthenticationPrincipla ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•´ì„œ ë¡œê·¸ì¸ëœ ì‚¬ìš©ì ì •ë³´ë¥¼ í™•ì¸í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³¸ë‹¤.</p>

<p><br /></p>

<p><strong>SampleController.java</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">org.young.club.controller</span><span class="o">;</span>


<span class="kn">import</span> <span class="nn">lombok.extern.log4j.Log4j2</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.core.annotation.AuthenticationPrincipal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.GetMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.young.club.security.dto.ClubAuthMemberDTO</span><span class="o">;</span>

<span class="nd">@Controller</span>
<span class="nd">@Log4j2</span>
<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/sample/"</span><span class="o">)</span>
<span class="c1">//ì‹œíë¦¬í‹°ì™€ ê´€ë ¨ëœ ì„¤ì •ì´ ì •ìƒì ìœ¼ë¡œ ëŒì•„ê°€ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•œ ê°„ë‹¨í•œ ì»¨íŠ¸ë¡¤ëŸ¬ êµ¬ì„±</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SampleController</span> <span class="o">{</span>
    <span class="c1">//ë¡œê·¸ì¸ì„ í•˜ì§€ ì•Šì€ ì‚¬ìš©ìë„ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” /sample/all</span>
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/all"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">exAll</span><span class="o">(){</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"exAll........."</span><span class="o">);</span>
    <span class="o">}</span>


    <span class="c1">//ë¡œê·¸ì¸í•œ ì‚¬ìš©ìë§Œì´ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” '/sample/member'</span>
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/member"</span><span class="o">)</span>
    <span class="c1">//ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë¡œê·¸ì¸ëœ ì‚¬ìš©ì ì •ë³´ë¥¼ í™•ì¸í•˜ëŠ” ë°©ë²•ì€ í¬ê²Œ 2ê°€ì§€ì´ë‹¤.</span>
    <span class="c1">//SecurityContextHolderë¼ëŠ” ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ê³¼ ì§ì ‘ íŒŒë¼ë¯¸í„°ì™€ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ ìˆëŠ”ë°</span>
    <span class="c1">//ì˜ˆì œì—ì„œëŠ” @AuthenticationPrincipla ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•´ì„œ ì²˜ë¦¬í•œë‹¤.</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">exMember</span><span class="o">(</span><span class="nd">@AuthenticationPrincipal</span> <span class="nc">ClubAuthMemberDTO</span> <span class="n">clubAuthMember</span><span class="o">){</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"exMember........."</span><span class="o">);</span>

        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"-------------------------"</span><span class="o">);</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="n">clubAuthMember</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="c1">//ê´€ë¦¬ì(admin) ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìë§Œì´ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” '/sample/admin'</span>
    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/admin"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">exAdmin</span><span class="o">(){</span>
        <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"exAdmin........."</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<p><br /></p>

<p><img src="/images/Learning_SpringBoot_with_Web_Project/Part5/Chapter10/10-5/2021-07-26-17-45-44.png" alt="" /></p>
:ET